name: ExÃ©cuter un script avec plusieurs node

# L'action s'activera Ã  chaque push sur le repository
on: [push]

jobs:
  multi-node:
    # On tourne sur une machine ubuntu
    runs-on: ubuntu-latest

    # On dÃ©finit une stratÃ©gie pour testers plusieurs version de node sous forme de tableau (= matrix)
    # Pour rappel seul les versions pairs de Node sont stables
    strategy:
      matrix:
        node: [16, 18, 20]

    # On donne un nom Ã  notre job en fonction de la version de node
    name: Node ${{ matrix.node }} sample

    steps:
      - name: ğŸ›‘ Annule les prÃ©cÃ©dents workflows
        uses: styfle/cancel-workflow-action@0.9.1
      - name: â¬‡ï¸ RÃ©cupÃ¨re le repository
        uses: actions/checkout@v4
      - name: ğŸ›  Installe la bonne version de node
        uses: actions/setup-node@v3
        with:
          # On rÃ©cupÃ¨re la version de node dans la matrice
          node-version: ${{ matrix.node }}
      - name: ğŸ“± Installe les dÃ©pendances
        # npm ci, prends les dÃ©pendances du package-lock.json et non du package.json
        # Ainsi on se base sur les derniÃ¨res dÃ©pendances installÃ©es en local
        run: npm ci
      - name: ğŸš€ ExÃ©cute le script
        # On exÃ©cute simplement le script
        run: node simpleScript.ts
